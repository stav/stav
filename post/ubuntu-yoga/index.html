<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.16" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="//fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/skeleton.css">
<link rel="stylesheet" href="/css/custom.css">
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="My stuff about computers">
<title>Lenovo Yoga Ultrabook SSD Tweaks - My stuff about computers</title>
</head>
<body>

<div class="container">

	<header role="banner">
		<div class="header-logo">
			<a href="/"><img src="/images/O.png" width="60" height="60" alt="My stuff about computers"></a>
		</div>
		
	</header>


	<main role="main">
		<article itemscope itemtype="http://schema.org/BlogPosting">
			<h1 class="entry-title" itemprop="headline">Lenovo Yoga Ultrabook SSD Tweaks</h1>
			<span class="entry-meta"><time itemprop="datePublished" datetime="2016-05-10">May 10, 2016</time></span>
			<section itemprop="entry-text">
				

<p>My Lenovo Yoga 2 Pro 13 is a wonderful machine and I want to take care of the
solid state device a.k.a. &ldquo;hard-drive&rdquo;.  Basically I want to reduce unnecessary
writes, for example by configuring the tmp dir to reside in memory.</p>

<p>System used: Grub2 | Linux | Debian | Ubuntu</p>

<h2 id="ignore-access-time">Ignore Access Time</h2>

<p>Use the <code>noatime</code> flag to tell the OS not to update the journal access time for
files or directories.</p>

<p><code>/etc/fstab</code>:</p>

<pre><code># file system    mp type options                   dump pass
UUID=2b386f58-4a /  ext4 errors=remount-ro,noatime  0    1
</code></pre>

<h2 id="memory-disk">Memory Disk</h2>

<p>Things that do a lot of writes but can be thrown away at shutdown are good
candidates for memory disks.</p>

<h3 id="temporary-files">Temporary Files</h3>

<p>House temporary files in memory so we don&rsquo;t waste writes to the SSD.</p>

<p><code>/etc/fstab</code>:</p>

<pre><code># fsys  mount point  type   options                     dump pass
tmpfs   /tmp         tmpfs  defaults,noatime,mode=1777   0    0
tmpfs   /var/spool   tmpfs  defaults,noatime,mode=1777   0    0
</code></pre>

<h3 id="browser-cache">Browser cache</h3>

<p>Also browser cache can go in memory since its a heavy writer.  I just did
Chromium since that&rsquo;s mainly what I use.  All I do is just create a link.</p>

<pre><code>mkdir -p /tmp/stav/cache/chromium
rm -rf ~/.cache/chromium
ln -s /tmp/stav/cache/chromium ~/.cache/chromium
</code></pre>

<p><code>/et/rc.local</code>:</p>

<pre><code>for user in stav; do
  DIR=/tmp/$user/cache/chromium
  sudo -u $user -- sh -c &quot;mkdir -p $DIR &amp;&amp; chmod -R 700 /tmp/$user&quot;
done
</code></pre>

<ul>
<li><a href="http://yktoo.com/en/blog/post/233">http://yktoo.com/en/blog/post/233</a></li>
</ul>

<h2 id="scheduler">Scheduler</h2>

<p>Make sure we are using <code>deadline</code>, not cfq.</p>

<p><code>/sys/block/sda/queue/scheduler</code>:</p>

<pre><code>noop [deadline] cfq
</code></pre>

<p><code>/etc/default/grub</code>:</p>

<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash elevator=deadline&quot;
</code></pre>

<p>Then update Grub:</p>

<pre><code>sudo update-grub2
</code></pre>

<ul>
<li><a href="http://bernaerts.dyndns.org/linux/74-ubuntu/250-ubuntu-tweaks-ssd#h3-change-default-scheduler">http://bernaerts.dyndns.org/linux/74-ubuntu/250-ubuntu-tweaks-ssd#h3-change-default-scheduler</a></li>
</ul>

<h2 id="swap">Swap</h2>

<p><code>/etc/sysctl.conf</code>:</p>

<pre><code># Sharply reduce swap inclination
vm.swappiness=0

# Improve cache management
vm.vfs_cache_pressure=50
</code></pre>

<h2 id="trim">TRIM</h2>

<p>Ubuntu already comes with a weekly cron job to trim discarded blocks:
<code>/etc/cron.weekly/fstrim</code>.  It is not advised to use &ldquo;discard&rdquo; in fstab because
it can result in performance issues when deleting a large number of small files.</p>

<h2 id="notes">Notes</h2>

<p>Reserve 10% SSD unallocated for over-provisioning</p>

<p>Do NOT enable hibernation</p>

<p>Windows: Dual boot? De-fragmentation will kill your SSD because of the many
write actions that it causes.</p>

<ul>
<li><a href="https://sites.google.com/site/easylinuxtipsproject/ssd">https://sites.google.com/site/easylinuxtipsproject/ssd</a></li>
</ul>

			</section>
		</article>
	</main>


	<footer role="contentinfo">
		<div class="hr"></div>
		<div class="footer-link">
			
			
			
			
		</div>
		<div class="copyright">Copyright &copy; 2016 Steven Almeroth</div>
	</footer>

</div>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
