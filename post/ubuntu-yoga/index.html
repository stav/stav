<!DOCTYPE html>
<html lang="en-us">
<head>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.16-DEV" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="//fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
<link rel="stylesheet" href="/css/normalize.css">
<link rel="stylesheet" href="/css/skeleton.css">
<link rel="stylesheet" href="/css/custom.css">
<link rel="alternate" href="/index.xml" type="application/rss+xml" title="O my garsh, stuff about computers">
<title>Lenovo Yoga Ultrabook SSD Tweaks - O my garsh, stuff about computers</title>
</head>
<body>

<div class="container">

	<header role="banner">
		<div class="header-logo">
			<a href="/"><img src="/images/O.png" width="60" height="60" alt="O my garsh, stuff about computers"></a>
		</div>
		
	</header>


	<main role="main">
		<article itemscope itemtype="http://schema.org/BlogPosting">
			<h1 class="entry-title" itemprop="headline">Lenovo Yoga Ultrabook SSD Tweaks</h1>
			<span class="entry-meta"><time itemprop="datePublished" datetime="2016-05-10">May 10, 2016</time></span>
			<section itemprop="entry-text">
				

<p>My Lenovo Yoga 2 Pro 13 is a wonderful machine and I want to take care the
solid state device a.k.a. &ldquo;hard-drive&rdquo;.  This is done by telling the operating
system not to do too many unnecessary writes and configuring the temp dir to
reside in memory.</p>

<p>Features:</p>

<ul>
<li>slim</li>
<li>sexy matte black</li>
<li>back-lit keyboard</li>
</ul>

<p>Hardware:</p>

<ul>
<li>256 Gb SSD</li>
<li>7.7 GiB RAM</li>
<li>Intel Core i7-4500U CPU @ 1.80GHz x 4</li>
<li>Intel Haswell Mobile graphics @ 3200x1800</li>
</ul>

<p>Pros:</p>

<ul>
<li>small &amp; fast</li>
<li>Ubuntu runs on it out of the box (ubuntu&rsquo;s box)</li>
</ul>

<p>Cons:</p>

<ul>
<li>no ethernet port, and&hellip;</li>
<li>the wifi card has issues</li>
</ul>

<h2 id="ignore-access-time:943618788ff0f9055fcfe42b9a7d5723">Ignore Access Time</h2>

<p>Tell the root partition device to not have to write access time journal entries</p>

<p>In <code>/etc/fstab</code>:</p>

<pre><code>UUID=d65e4ad3-6315-4838-97a1-ec574cb8575f / ext4 noatime,discard,errors=remount-ro  0  1
</code></pre>

<ul>
<li><a href="http://ubuntuforums.org/showthread.php?t=1928155&amp;p=11702911#post11702911">http://ubuntuforums.org/showthread.php?t=1928155&amp;p=11702911#post11702911</a></li>
</ul>

<h2 id="performance:943618788ff0f9055fcfe42b9a7d5723">Performance</h2>

<p>In <code>/etc/fstab</code>:</p>

<pre><code>/dev/sda   /   ext4   noatime,nodiratime,discard,errors=remount-ro 0 1
tmpfs   /tmp       tmpfs   defaults,noatime,mode=1777   0  0
</code></pre>

<p>In <code>/etc/rc.local</code>:</p>

<pre><code>echo deadline &gt; /sys/block/sda/queue/scheduler
echo 0 &gt; /proc/sys/vm/swappiness
</code></pre>

<p>In <code>/etc/default/grub</code>:</p>

<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash elevator=deadline&quot;
</code></pre>

<p>From command line:</p>

<pre><code>sudo update-grub2
</code></pre>

<p>Moving the cache in Chrome is a little harder. The directory is hardcoded but
you can use symbolic links to point it to a directory on another drive or to
<code>/tmp</code>. You&rsquo;ll find the cache under <code>~/.cache/chromium</code>. You could also redirect
the entire .cache directory as many programs use this for caching data.</p>

<p>In Linux simply run <code>fdisk -cu (device)</code> on the drive you want to partition
press <code>n</code> for new partition <code>p</code> for primary and enter a start sector of at
least 2048. The general rule is that the starting sector must be divisible by
512 but to cater for all variations of SSD page size and filesystem block size
2048 is a good idea.</p>

<ul>
<li>from apcmag.com/how-to-maximise-ssd-performance-with-linux.htm</li>
</ul>

<h2 id="optimizations:943618788ff0f9055fcfe42b9a7d5723">Optimizations</h2>

<p>Reserve 10% SSD unallocated for over-provisioning</p>

<h3 id="noatime:943618788ff0f9055fcfe42b9a7d5723">Noatime</h3>

<p>In <code>/etc/fstab</code>:</p>

<pre><code>UUID=633603b4-665b-408b-beea-868e3d8c2428   /  ext4  noatime,errors=remount-ro 0  1
tmpfs      /tmp          tmpfs      defaults,noatime,mode=1777    0    0
</code></pre>

<h3 id="trim:943618788ff0f9055fcfe42b9a7d5723">TRIM</h3>

<p><code>/etc/rc.local</code>:</p>

<pre><code>fstrim -v /
</code></pre>

<p>Not advised - &ldquo;discard&rdquo; in fstab:</p>

<p><code>/etc/fstab</code>:</p>

<pre><code>UUID=f0ae2c59-83d2-42e7-81c4-2e870b6b255d   /   ext4 discard,errors=remount-ro   0   1
</code></pre>

<h3 id="disable-the-superfluous-weekly-cron-job-for-trim:943618788ff0f9055fcfe42b9a7d5723">Disable the superfluous weekly cron job for TRIM</h3>

<pre><code>sudo mv -v /etc/cron.weekly/fstrim /fstrim
</code></pre>

<h3 id="swap:943618788ff0f9055fcfe42b9a7d5723">Swap</h3>

<p><code>/etc/sysctl.conf</code>:</p>

<pre><code># Sharply reduce swap inclination
vm.swappiness=1

# Improve cache management
vm.vfs_cache_pressure=50
</code></pre>

<h3 id="notes:943618788ff0f9055fcfe42b9a7d5723">Notes</h3>

<p>Limit the write actions of Chrome and Chromium</p>

<p>Check which scheduler is being used</p>

<pre><code>cat /sys/block/sda/queue/scheduler
</code></pre>

<p>Do NOT enable hibernation</p>

<p>Windows: Dual boot? Don&rsquo;t let Windows kill your SSD. De-fragmentation will kill your SSD in a very short time, because of the multitude of write actions that it causes.</p>

<ul>
<li><a href="https://sites.google.com/site/easylinuxtipsproject/ssd">https://sites.google.com/site/easylinuxtipsproject/ssd</a></li>
</ul>

			</section>
		</article>
	</main>


	<footer role="contentinfo">
		<div class="hr"></div>
		<div class="footer-link">
			
			
			
			
		</div>
		<div class="copyright">Copyright &copy; 2016 Steven Almeroth</div>
	</footer>

</div>



<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

</body>
</html>
